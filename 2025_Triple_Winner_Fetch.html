<body>
  <h1>2025 RSL Weekly Triple Winner Report</h1>

  <label for="weekSelect"><strong>Select a Week:</strong></label>
  <select id="weekSelect">
    <option value="2025resultsweek01.json">Week #1 (06/08/2025)</option>
    <option value="2025resultsweek02.json">Week #2 (06/15/2025)</option>
    <option value="2025resultsweek03.json">Week #3 (06/22/2025)</option>
    <option value="2025resultsweek04.json">Week #4 (06/29/2025)</option>
    <option value="2025resultsweek05.json">Week #5 (07/06/2025)</option>
    <option value="2025resultsweek06.json">Week #6 (07/13/2025)</option>
    <option value="2025resultsweek07.json">Week #7 (07/20/2025)</option>
    <option value="2025resultsweek08.json">Week #8 (07/27/2025)</option>
  </select>

  <div id="table-container">
    <p class="error" id="error-message" style="display:none;">
      Could not load results. Please check back later.
    </p>
  </div>

  <script>
    const select = document.getElementById('weekSelect');

    function loadWeek(fileName) {
      fetch(fileName)
        .then(response => {
          if (!response.ok) throw new Error('Failed to fetch');
          return response.json();
        })
        .then(data => {
          document.getElementById('error-message').style.display = 'none';
          const headers = data.fields;
          const rows = data.values;

          const table = document.createElement('table');

          const thead = document.createElement('thead');
          const headerRow = document.createElement('tr');
          headers.forEach(h => {
            const th = document.createElement('th');
            th.textContent = h;
            headerRow.appendChild(th);
          });
          thead.appendChild(headerRow);
          table.appendChild(thead);

          const tbody = document.createElement('tbody');
          rows.forEach(row => {
            const tr = document.createElement('tr');
            row.forEach(cell => {
              const td = document.createElement('td');
              td.textContent = cell;
              tr.appendChild(td);
            });
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);

          const container = document.getElementById('table-container');
          container.innerHTML = ''; // clear previous
          container.appendChild(table);
        })
        .catch(error => {
          console.error('Error loading JSON:', error);
          document.getElementById('table-container').innerHTML = '';
          document.getElementById('error-message').style.display = 'block';
        });
    }

    // Load default week on page load
    loadWeek(select.value);

    // Load selected week on dropdown change
    select.addEventListener('change', () => {
      loadWeek(select.value);
    });
  </script>
</body>
