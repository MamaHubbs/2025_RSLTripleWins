<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>2025 RSL Weekly Triple Winner Report</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f8f8f8;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #0156B3;
      font-size: 2em;
      margin-bottom: 10px;
    }
    .dropdown-container {
      text-align: center;
      margin-bottom: 20px;
    }
    .dropdown-box {
      display: inline-block;
      margin: 0 10px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 6px;
    }
    select {
      padding: 6px 12px;
      font-size: 0.9em;
      border-radius: 6px;
    }
    button {
      padding: 6px 14px;
      font-size: 0.9em;
      margin-top: 10px;
      border-radius: 6px;
      background-color: #0156B3;
      color: white;
      border: none;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8em;
      margin-top: 10px;
    }
    th, td {
      padding: 6px 10px;
      border: 1px solid #ccc;
      text-align: left;
      vertical-align: top;
    }
    th {
      background-color: #e5f1ff;
      position: sticky;
      top: 0;
      z-index: 1;
      cursor: pointer;
    }
    th.sortable::after {
      content: ' \21C5';
      font-size: 0.7em;
      color: #666;
    }
    .row-group-even {
      background-color: #ffffff;
    }
    .row-group-odd {
      background-color: #f0f0f0;
    }
    .error {
      color: red;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>
<body>
<h1>2025 RSL Weekly Triple Winner Report</h1>
<div class="dropdown-container">
  <div class="dropdown-box">
    <label for="weekSelect">Select Week:</label>
    <select id="weekSelect">
      <option value="all">All Weeks</option>
      <option value="2025resultsweek01.json">Week #1 (06/08/2025)</option>
      <option value="2025resultsweek02.json">Week #2 (06/15/2025)</option>
      <option value="2025resultsweek03.json">Week #3 (06/22/2025)</option>
      <option value="2025resultsweek04.json">Week #4 (06/29/2025)</option>
      <option value="2025resultsweek05.json">Week #5 (07/06/2025)</option>
      <option value="2025resultsweek06.json">Week #6 (07/13/2025)</option>
      <option value="2025resultsweek07.json">Week #7 (07/20/2025)</option>
      <option value="2025resultsweek08.json">Week #8 (07/27/2025)</option>
    </select>
  </div>
  <div class="dropdown-box">
    <label for="meetDateSelect">Select Meet Date:</label>
    <select id="meetDateSelect">
      <option value="all">All Dates</option>
    </select>
  </div>
  <div class="dropdown-box">
    <label for="genderSelect">Select Gender:</label>
    <select id="genderSelect">
      <option value="all">All Genders</option>
      <option value="F">Female</option>
      <option value="M">Male</option>
    </select>
  </div>
  <div class="dropdown-box">
    <label for="divisionSelect">Select Division:</label>
    <select id="divisionSelect">
      <option value="all">All Divisions</option>
    </select>
  </div>
  <div class="dropdown-box">
    <label for="teamSelect">Select Team:</label>
    <select id="teamSelect">
      <option value="all">All Teams</option>
    </select>
  </div>
  <div class="dropdown-box">
    <label for="meetNameSelect">Select Meet:</label>
    <select id="meetNameSelect">
      <option value="all">All Meets</option>
    </select>
  </div>
  <div class="dropdown-box">
    <button onclick="clearFilters()">Clear Filters</button>
  </div>
</div>
<div id="table-container">
  <p class="error" id="error-message" style="display:none;">
    Could not load results. Please check back later.
  </p>
</div>
<script>
const divisionMap = {
  "Massad YMCA": "Battlefield", "Hampton Oaks": "Battlefield", "Woodlands": "Battlefield",
  "Fawn Lake": "Battlefield", "Spotswood": "Battlefield", "Curtis Park": "Battlefield",
  "Leeland Station": "Patriot", "Austin Ridge": "Patriot", "Lake of the Woods": "Patriot",
  "Lee's Hill": "Patriot", "Aquia Harbour": "Patriot", "Dahlgren": "Patriot", "Fox Point": "Patriot",
  "Fredericksburg CC": "American", "Ferry Farm": "American", "Chancellor": "American",
  "Hopyard": "American", "Caroline": "American", "Spotsy Y": "American",
  "Grafton": "National", "College Heights": "National", "Salem Fields": "National",
  "Lake Wilderness": "National", "Eden Estates": "National", "Idlewild": "National"
};

const weekSelect = document.getElementById('weekSelect');
const dateSelect = document.getElementById('meetDateSelect');
const genderSelect = document.getElementById('genderSelect');
const divisionSelect = document.getElementById('divisionSelect');
const teamSelect = document.getElementById('teamSelect');
const meetSelect = document.getElementById('meetNameSelect');
let fullData = [];
let currentSort = { index: null, direction: 1 };
const weekFiles = [...Array(8).keys()].map(i => `2025resultsweek0${i+1}.json`);

function loadWeek(fileName) {
  const load = fileName === "all"
    ? Promise.all(weekFiles.map(f => fetch(f).then(r => r.json())))
        .then(data => data.flatMap(d => d.values))
    : fetch(fileName).then(r => r.json()).then(d => d.values);

  load.then(data => {
    fullData = data;
    afterDataLoad();
  }).catch(() => {
    document.getElementById('error-message').style.display = 'block';
  });
}

weekSelect.addEventListener('change', () => loadWeek(weekSelect.value));
window.onload = () => loadWeek(weekSelect.value);
</script>
</body>
</html>
